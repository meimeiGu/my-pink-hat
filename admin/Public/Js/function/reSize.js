!function(a,b){function c(){var u=h.getBoundingClientRect().width;u/o>540&&(u=540*o);var v=u/10;h.style.fontSize=v+"px",q.rem=a.rem=v}var d,f=a.document,h=f.documentElement,k=f.querySelector('meta[name="viewport"]'),m=f.querySelector('meta[name="flexible"]'),o=0,p=0,q=b.flexible||(b.flexible={});if(k){console.warn("将根据已有的meta标签来设置缩放比例");var r=k.getAttribute("content").match(/initial\-scale=([\d\.]+)/);r&&(p=parseFloat(r[1]),o=parseInt(1/p))}else{if(m){var s=m.getAttribute("content");if(s){var t=s.match(/initial\-dpr=([\d\.]+)/),e=s.match(/maximum\-dpr=([\d\.]+)/);t&&(o=parseFloat(t[1]),p=parseFloat((1/o).toFixed(2))),e&&(o=parseFloat(e[1]),p=parseFloat((1/o).toFixed(2)))}}}if(!o&&!p){var g=a.navigator.userAgent,i=(!!g.match(/android/gi),!!g.match(/iphone/gi)),j=i&&!!g.match(/OS 9_3/),l=a.devicePixelRatio;o=i&&!j?l>=3&&(!o||o>=3)?3:l>=2&&(!o||o>=2)?2:1:1,p=1/o}if(h.setAttribute("data-dpr",o),!k){if(k=f.createElement("meta"),k.setAttribute("name","viewport"),k.setAttribute("content","initial-scale="+p+", maximum-scale="+p+", minimum-scale="+p+", user-scalable=no"),h.firstElementChild){h.firstElementChild.appendChild(k)}else{var n=f.createElement("div");n.appendChild(k),f.write(n.innerHTML)}}a.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(c,300)},!1),a.addEventListener("pageshow",function(u){u.persisted&&(clearTimeout(d),d=setTimeout(c,300))},!1),"complete"===f.readyState?f.body.style.fontSize=12*o+"px":f.addEventListener("DOMContentLoaded",function(){f.body.style.fontSize=12*o+"px"},!1),c(),q.dpr=a.dpr=o,q.refreshRem=c,q.rem2px=function(u){var v=parseFloat(u)*this.rem;return"string"==typeof u&&u.match(/rem$/)&&(v+="px"),v},q.px2rem=function(u){var v=parseFloat(u)/this.rem;return"string"==typeof u&&u.match(/px$/)&&(v+="rem"),v}}(window,window.lib||(window.lib={}));